# Get YouTube Data POC

このプロジェクトは、YouTubeデータや市場データを使用して株価予測や分析を行うPOC（Proof of Concept）です。

## スクリプト (`src/`) の説明

`src` ディレクトリに含まれる主要なスクリプトの概要は以下の通りです。

- **collect_data.py**
  - **機能**: Yahoo Finance (`yfinance`) から株価（個別銘柄、指数、セクターETF）データを収集します。
  - **特徴**: 既存データの差分更新、新規追加銘柄の自動検出と全期間取得、ダッシュボード用の最新データJSON保存などの機能を備えています。

- **collect_sentiment.py**
  - **機能**: 特定のYouTubeチャンネルの動画から市場センチメントを分析します。
  - **特徴**: Google YouTube APIで動画情報を取得し、DeepSeek API (LLM) を使用して動画タイトルと説明文から市場の見通しをスコアリング (-1.0〜+1.0) します。

- **create_features.py**
  - **機能**: 収集したデータから機械学習モデル学習用の特徴量を生成・加工します。
  - **特徴**: テクニカル指標（RSI, MACD, ストキャスティクス, ボリンジャーバンド等）、市場指標（VIX, 米国債利回り等）、センチメントデータなどを統合し、学習用データセット (`train_data.csv`) を作成します。

- **predict_ranking.py**
  - **機能**: LightGBMを使用して株価ランキングモデルを学習・予測します。
  - **特徴**: 時系列交差検証 (Five-Fold TimeSeriesSplit) を行い、将来の株価パフォーマンス（対日経平均）を予測します。結果はランキング形式でCSV出力されます。

- **generate_reports.py**
  - **機能**: 予測ランキング上位の銘柄について、詳細な分析レポートを生成します。
  - **特徴**: 直近の株価データ、財務指標（成長率、収益性等）、ニュース情報を集約し、DeepSeek AI (Reasoning Model) にプロンプトを投げて詳細なテキストレポートを作成・保存します。

- **forecast_to_db.py**
  - **機能**: `predict_ranking.py` で生成された予測結果CSVをデータベースに保存します。
  - **特徴**: PostgreSQLデータベースに対して Upsert 処理を行い、予測履歴を蓄積します。

- **db_utils.py**
  - **機能**: データベース操作のための共通ユーティリティです。
  - **特徴**: テーブルの自動作成、カラム追加、Upsert処理などを抽象化して提供します。

- **settings.py**
  - **機能**: プロジェクト全体の設定管理です。
  - **特徴**: ディレクトリパスや定数定義などを含みます。
